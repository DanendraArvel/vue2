<style>
    body {
        font-family: Arial, sans-serif;
        background-color: #f4f4f4;
        margin: 5;
        padding: 5;
    }
    .comments {
        margin: 20px;
        padding: 20px;
        border-left: 2px solid black;
        background-color: #ccc;
        border-radius: 5px;
    }
    .albums {
        margin: 20px;
        padding: 20px;
        border-left: 2px solid blue;
        background-color: #e0f7fa;
        border-radius: 5px;
    }
    .users {
        margin: 20px;
        padding: 20px;
        border-left: 2px solid green;
        background-color: #e8f5e9;
        border-radius: 5px;
    }
</style>

<div id="app">
    <div v-if="loading">Loading posts...</div>
    <div v-else-if="error">Error: {{ error }}</div>
    <div v-else>
        <div v-for="post in posts" :key="post.id" class="post">
            <h2>{{ post.title }}</h2>
            <p>{{ post.body }}</p>
            <button @click="toggleComments(post.id)">{{ post.showComments ? 'Hide Comments' : 'Show Comments' }}</button>
            <button style="margin-left: 5px;" @click="toggleAlbums(post.id)">{{ post.showAlbums ? 'Hide Albums' : 'Show Albums' }}</button>
            <button style="margin-left: 5px;" @click="toggleUsers(post.id)">{{ post.showUsers ? 'Hide Users' : 'Show Users' }}</button>
            <div class="users" v-if="post.showUsers">
                <h3>Users:</h3>
                <ol>
                    <li v-for="user in post.users" :key="user.id">
                        {{ user.name }}
                    </li>
                </ol>
            </div>
            <div class="albums" v-if="post.showAlbums">
                <h3>Albums:</h3>
                <ol>
                    <li v-for="album in post.albums" :key="album.id">
                        {{ album.title }}
                    </li>
                </ol>
            </div>
            <div class="comments" v-if="post.showComments">
                <h3>Comments:</h3>
                <ul>
                    <li v-for="comment in post.comments" :key="comment.id">
                        <div class="name">{{ comment.name }}</div>
                        <hr style="width: 40%; margin-left: 0;">
                        <!-- <div>{{ comment.body }}</div> -->
                        {{ comment.body }}
                        <br>
                        <br>
                        <div class="email">{{ comment.email }}</div>
                        <br>
                        <hr>
                        <br>
                    </li>
                </ul>
            </div>
        </div>
    </div>
</div>

    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>

    <script>
        const { createApp } = Vue;

        createApp({
            data() {
                return {
                    posts: [],
                    loading: true,
                    error: null
                }
            },
            mounted() {
                this.fetchPosts();
            },
            methods: {
                async fetchPosts() {
                    try {
                        const response = await fetch('https://jsonplaceholder.typicode.com/posts');
                        if (!response.ok) {
                            throw new Error('Network response was not ok');
                        }
                        const data = await response.json();
                        this.posts = data.map(post => ({
                            ...post,
                            showComments: false
                        }));
                        this.loading = false;
                    } catch (error) {
                        this.error = error.message;
                        this.loading = false;
                    }
                },
                async toggleComments(postId) {
                    const post = this.posts.find(p => p.id === postId);
                    if (!post.showComments) {
                        try {
                            const response = await fetch(`https://jsonplaceholder.typicode.com/posts/${post.id}/comments`);
                            if (!response.ok) {
                                throw new Error('Network response was not ok');
                            }
                            const comments = await response.json();
                            post.comments = comments;
                        } catch (error) {
                            console.error('Error fetching comments:', error);
                        }
                    }
                    post.showComments = !post.showComments;
                },
                async toggleAlbums(postId) {
                    const post = this.posts.find(p => p.id === postId);
                    if (!post.showAlbums) {
                        try {
                            const response = await fetch(`https://jsonplaceholder.typicode.com/posts/${post.id}/albums`);
                            if (!response.ok) {
                                throw new Error('Network response was not ok');
                            }
                            const albums = await response.json();
                            post.albums = albums;
                        } catch (error) {
                            console.error('Error fetching albums:', error);
                        }
                    }
                    post.showAlbums = !post.showAlbums;
                },
                async toggleUsers(postId) {
                    const post = this.posts.find(p => p.id === postId);
                    if (!post.showUsers) {
                        try {
                            const response = await fetch(`https://jsonplaceholder.typicode.com/posts/${post.id}/users`);
                            if (!response.ok) {
                                throw new Error('Network response was not ok');
                            }
                            const users = await response.json();
                            post.users = users;
                        } catch (error) {
                            console.error('Error fetching users:', error);
                        }
                    }
                    post.showUsers = !post.showUsers;
                }
            }

        }).mount('#app');
    </script>